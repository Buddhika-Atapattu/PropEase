<!-- Canva -->
<div class="camera-container" *ngIf="isCameraOpen">
  <video #videoRef autoplay playsinline width="100%" height="100%"></video>
  <button type="button" (click)="onCaptureImage()">
    <span></span>
  </button>
</div>
<!-- End Canva -->

<div class="container-fluid">
  <!-- Camera Sections -->
  <div class="row">
    <div class="col-xl-12 p-0">
      <canvas #canvas hidden></canvas>
    </div>
  </div>
  <div class="row d-none">
    <div class="col-12">
      <input
        type="file"
        accept="image/*"
        style="display: none"
        #hiddenFileInput
        (change)="onFileSelected($event)"
      />
    </div>
  </div>

  <!-- End Camera Sections -->

  <!-- Image Cropper -->
  <div
    *ngIf="showCropper"
    class="row d-flex justify-content-center align-item-center text-center my-4"
  >
    <div class="col-xl-6">
      <image-cropper
        class="image-cropper mx-auto"
        [imageChangedEvent]="selectedImageChangedEvent"
        [maintainAspectRatio]="false"
        format="png"
        (imageCropped)="imageCropped($event)"
      ></image-cropper>
      <div class="row mt-3 d-flex justify-content-center align-item-center">
        <div class="col-6 d-flex justify-content-end align-item-center">
          <button
            type="button"
            class="btn btn-view me-2 text-default"
            (click)="saveCroppedImage()"
          >
            Save
          </button>
        </div>
        <div class="col-6 d-flex justify-content-start align-item-center">
          <button
            type="button"
            class="btn btn-danger text-default"
            (click)="cancelCrop()"
          >
            Cancel
          </button>
        </div>
      </div>
    </div>
  </div>
  <!-- End Image Cropper -->

  <!-- Image Preview -->
  <div
    *ngIf="!isCameraOpen && !showCropper"
    class="row d-flex justify-content-center align-item-center mt-4"
  >
    <div
      class="col-xl-6 col-md-8 col-sm-12 col-12 d-flex justify-content-center align-item-center"
    >
      <div class="image-container">
        <img [src]="uploadedImage" alt="capture image" class="capture-image" />
      </div>
    </div>
  </div>
  <!-- End Image Preview -->

  <!-- Action Buttons -->
  <div class="row my-5" *ngIf="!isCameraOpen && !showCropper">
    <div class="col-4 d-flex justify-content-end align-item-center">
      <button
        type="button"
        class="btn-danger text-uppercase fw-bold"
        (click)="cancel()"
      >
        cancel
      </button>
    </div>
    <div class="col-4 d-flex justify-content-center align-item-center">
      <button
        type="button"
        class="btn-warning text-uppercase fw-bold"
        (click)="retry()"
      >
        retry
      </button>
    </div>
    <div class="col-4 d-flex justify-content-start align-item-center">
      <button
        type="button"
        class="btn-view text-uppercase fw-bold"
        (click)="upload()"
      >
        upload
      </button>
    </div>
  </div>
  <!-- End Action Buttons -->
</div>
